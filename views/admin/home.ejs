<!doctype html>
<html lang="en">

<head>
    <%- include('./_link.ejs') %>
    <title>Fanwar - Admin Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    
    <% for (const item of labels) { %>
        <input type="hidden" class="label-temp" value="<%=item%>" />
    <% } %>

    <% for (const item of data) { %>
        <input type="hidden" class="data-temp" value="<%=item%>" />
    <% } %>
    <script>
        const xlabels = [];
        var inputLabel = document.getElementsByClassName('label-temp');
        for (const iterator of inputLabel) {
            xlabels.push(iterator.value);
        }

        const ydata = [];
        var inputLabel = document.getElementsByClassName('data-temp');
        for (const iterator of inputLabel) {
            ydata.push(iterator.value);
        }
    </script>
    
</head>

<body>
    <!-- ============================================================== -->
    <!-- main wrapper -->
    <!-- ============================================================== -->
    <div class="dashboard-main-wrapper">
        <!-- ============================================================== -->
        <!-- navbar -->
        <!-- ============================================================== -->
        <%- include('./_sidebar.ejs') %>
        <!-- ============================================================== -->
        <!-- end left sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- wrapper  -->
        <!-- ============================================================== -->
        <div class="dashboard-wrapper">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content ">
                    <!-- ============================================================== -->
                    <!-- pageheader  -->
                    <!-- ============================================================== -->
                    <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="page-header">
                                <h2 class="pageheader-title">E-commerce Dashboard Template </h2>
                                <p class="pageheader-text">Nulla euismod urna eros, sit amet scelerisque torton lectus
                                    vel mauris facilisis faucibus at enim quis massa lobortis rutrum.</p>
                                <div class="page-breadcrumb">
                                    <nav aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item"><a href="#"
                                                    class="breadcrumb-link">Dashboard</a></li>
                                            <li class="breadcrumb-item active" aria-current="page">E-Commerce Dashboard
                                                Template</li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ============================================================== -->
                    <!-- end pageheader  -->
                    <!-- ============================================================== -->
                    <div class="ecommerce-widget">

                        <div class="row">
                            <!-- product sales  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-6 col-lg-12 col-md-12 col-sm-12 col-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h5 class="mb-0"> Product Sales</h5>
                                    </div>
                                    <div class="card-body">
                                        <!-- <div class="ct-chart-product ct-golden-section"></div> -->
                                        <canvas id="categorychart"></canvas>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end product sales  -->

                        </div>

                        <div class="row">
                            <!-- ============================================================== -->
                            <!-- sales  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="card border-3 border-top border-top-primary">
                                    <div class="card-body">
                                        <h5 class="text-muted">Sales</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">$12099</h1>
                                        </div>
                                        <div
                                            class="metric-label d-inline-block float-right text-success font-weight-bold">
                                            <span class="icon-circle-small icon-box-xs text-success bg-success-light"><i
                                                    class="fa fa-fw fa-arrow-up"></i></span><span
                                                class="ml-1">5.86%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end sales  -->
                            <!-- ============================================================== -->
                            <!-- ============================================================== -->
                            <!-- new customer  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="card border-3 border-top border-top-primary">
                                    <div class="card-body">
                                        <h5 class="text-muted">New Customer</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">1245</h1>
                                        </div>
                                        <div
                                            class="metric-label d-inline-block float-right text-success font-weight-bold">
                                            <span class="icon-circle-small icon-box-xs text-success bg-success-light"><i
                                                    class="fa fa-fw fa-arrow-up"></i></span><span
                                                class="ml-1">10%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end new customer  -->
                            <!-- ============================================================== -->
                            <!-- ============================================================== -->
                            <!-- visitor  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="card border-3 border-top border-top-primary">
                                    <div class="card-body">
                                        <h5 class="text-muted">Visitor</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">13000</h1>
                                        </div>
                                        <div
                                            class="metric-label d-inline-block float-right text-success font-weight-bold">
                                            <span class="icon-circle-small icon-box-xs text-success bg-success-light"><i
                                                    class="fa fa-fw fa-arrow-up"></i></span><span class="ml-1">5%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end visitor  -->
                            <!-- ============================================================== -->
                            <!-- ============================================================== -->
                            <!-- total orders  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12 col-12">
                                <div class="card border-3 border-top border-top-primary">
                                    <div class="card-body">
                                        <h5 class="text-muted">Total Orders</h5>
                                        <div class="metric-value d-inline-block">
                                            <h1 class="mb-1">1340</h1>
                                        </div>
                                        <div
                                            class="metric-label d-inline-block float-right text-danger font-weight-bold">
                                            <span
                                                class="icon-circle-small icon-box-xs text-danger bg-danger-light bg-danger-light "><i
                                                    class="fa fa-fw fa-arrow-down"></i></span><span
                                                class="ml-1">4%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end total orders  -->
                            <!-- ============================================================== -->
                        </div>
                        <div class="row">
                            <!-- ============================================================== -->
                            <!-- total revenue  -->
                            <!-- ============================================================== -->


                            <!-- ============================================================== -->
                            <!-- ============================================================== -->
                            <!-- category revenue  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Revenue by Category</h5>
                                    <div class="card-body">
                                        <div id="c3chart_category" style="height: 420px;"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end category revenue  -->
                            <!-- ============================================================== -->

                            <div class="col-xl-7 col-lg-7 col-md-12 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header"> Total Revenue</h5>
                                    <div class="card-body">
                                        <div id="morris_totalrevenue"></div>
                                    </div>
                                    <div class="card-footer">
                                        <p class="display-7 font-weight-bold"><span
                                                class="text-primary d-inline-block">$26,000</span><span
                                                class="text-success float-right">+9.45%</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-5 col-lg-6 col-md-6 col-sm-12 col-12">
                                <!-- ============================================================== -->
                                <!-- social source  -->
                                <!-- ============================================================== -->
                                <div class="card">
                                    <h5 class="card-header"> Sales By Social Source</h5>
                                    <div class="card-body p-0">
                                        <ul class="social-sales list-group list-group-flush">
                                            <li class="list-group-item social-sales-content"><span
                                                    class="social-sales-icon-circle facebook-bgcolor mr-2"><i
                                                        class="fab fa-facebook-f"></i></span><span
                                                    class="social-sales-name">Facebook</span><span
                                                    class="social-sales-count text-dark">120 Sales</span>
                                            </li>
                                            <li class="list-group-item social-sales-content"><span
                                                    class="social-sales-icon-circle twitter-bgcolor mr-2"><i
                                                        class="fab fa-twitter"></i></span><span
                                                    class="social-sales-name">Twitter</span><span
                                                    class="social-sales-count text-dark">99 Sales</span>
                                            </li>
                                            <li class="list-group-item social-sales-content"><span
                                                    class="social-sales-icon-circle instagram-bgcolor mr-2"><i
                                                        class="fab fa-instagram"></i></span><span
                                                    class="social-sales-name">Instagram</span><span
                                                    class="social-sales-count text-dark">76 Sales</span>
                                            </li>
                                            <li class="list-group-item social-sales-content"><span
                                                    class="social-sales-icon-circle pinterest-bgcolor mr-2"><i
                                                        class="fab fa-pinterest-p"></i></span><span
                                                    class="social-sales-name">Pinterest</span><span
                                                    class="social-sales-count text-dark">56 Sales</span>
                                            </li>
                                            <li class="list-group-item social-sales-content"><span
                                                    class="social-sales-icon-circle googleplus-bgcolor mr-2"><i
                                                        class="fab fa-google-plus-g"></i></span><span
                                                    class="social-sales-name">Google Plus</span><span
                                                    class="social-sales-count text-dark">36 Sales</span>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-footer text-center">
                                        <a href="#" class="btn-primary-link">View Details</a>
                                    </div>
                                </div>
                                <!-- ============================================================== -->
                                <!-- end social source  -->
                                <!-- ============================================================== -->
                            </div>
                            <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12 col-12">
                                <!-- ============================================================== -->
                                <!-- sales traffice source  -->
                                <!-- ============================================================== -->
                                <div class="card">
                                    <h5 class="card-header"> Sales By Traffic Source</h5>
                                    <div class="card-body p-0">
                                        <ul class="traffic-sales list-group list-group-flush">
                                            <li class="traffic-sales-content list-group-item "><span
                                                    class="traffic-sales-name">Direct</span><span
                                                    class="traffic-sales-amount">$4000.00 <span
                                                        class="icon-circle-small icon-box-xs text-success ml-4 bg-success-light"><i
                                                            class="fa fa-fw fa-arrow-up"></i></span><span
                                                        class="ml-1 text-success">5.86%</span></span>
                                            </li>
                                            <li class="traffic-sales-content list-group-item"><span
                                                    class="traffic-sales-name">Search<span
                                                        class="traffic-sales-amount">$3123.00 <span
                                                            class="icon-circle-small icon-box-xs text-success ml-4 bg-success-light"><i
                                                                class="fa fa-fw fa-arrow-up"></i></span><span
                                                            class="ml-1 text-success">5.86%</span></span>
                                                </span>
                                            </li>
                                            <li class="traffic-sales-content list-group-item"><span
                                                    class="traffic-sales-name">Social<span
                                                        class="traffic-sales-amount ">$3099.00 <span
                                                            class="icon-circle-small icon-box-xs text-success ml-4 bg-success-light"><i
                                                                class="fa fa-fw fa-arrow-up"></i></span><span
                                                            class="ml-1 text-success">5.86%</span></span>
                                                </span>
                                            </li>
                                            <li class="traffic-sales-content list-group-item"><span
                                                    class="traffic-sales-name">Referrals<span
                                                        class="traffic-sales-amount ">$2220.00 <span
                                                            class="icon-circle-small icon-box-xs text-danger ml-4 bg-danger-light"><i
                                                                class="fa fa-fw fa-arrow-down"></i></span><span
                                                            class="ml-1 text-danger">4.02%</span></span>
                                                </span>
                                            </li>
                                            <li class="traffic-sales-content list-group-item "><span
                                                    class="traffic-sales-name">Email<span
                                                        class="traffic-sales-amount">$1567.00 <span
                                                            class="icon-circle-small icon-box-xs text-danger ml-4 bg-danger-light"><i
                                                                class="fa fa-fw fa-arrow-down"></i></span><span
                                                            class="ml-1 text-danger">3.86%</span></span>
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-footer text-center">
                                        <a href="#" class="btn-primary-link">View Details</a>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end sales traffice source  -->
                            <!-- ============================================================== -->
                            <!-- ============================================================== -->
                            <!-- sales traffic country source  -->
                            <!-- ============================================================== -->
                            <div class="col-xl-3 col-lg-12 col-md-6 col-sm-12 col-12">
                                <div class="card">
                                    <h5 class="card-header">Sales By Country Traffic Source</h5>
                                    <div class="card-body p-0">
                                        <ul class="country-sales list-group list-group-flush">
                                            <li class="country-sales-content list-group-item"><span class="mr-2"><i
                                                        class="flag-icon flag-icon-us" title="us" id="us"></i> </span>
                                                <span class="">United States</span><span
                                                    class="float-right text-dark">78%</span>
                                            </li>
                                            <li class="list-group-item country-sales-content"><span class="mr-2"><i
                                                        class="flag-icon flag-icon-ca" title="ca"
                                                        id="ca"></i></span><span class="">Canada</span><span
                                                    class="float-right text-dark">7%</span>
                                            </li>
                                            <li class="list-group-item country-sales-content"><span class="mr-2"><i
                                                        class="flag-icon flag-icon-ru" title="ru"
                                                        id="ru"></i></span><span class="">Russia</span><span
                                                    class="float-right text-dark">4%</span>
                                            </li>
                                            <li class="list-group-item country-sales-content"><span class=" mr-2"><i
                                                        class="flag-icon flag-icon-in" title="in"
                                                        id="in"></i></span><span class="">India</span><span
                                                    class="float-right text-dark">12%</span>
                                            </li>
                                            <li class="list-group-item country-sales-content"><span class=" mr-2"><i
                                                        class="flag-icon flag-icon-fr" title="fr"
                                                        id="fr"></i></span><span class="">France</span><span
                                                    class="float-right text-dark">16%</span>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-footer text-center">
                                        <a href="#" class="btn-primary-link">View Details</a>
                                    </div>
                                </div>
                            </div>
                            <!-- ============================================================== -->
                            <!-- end sales traffice country source  -->
                            <!-- ============================================================== -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- footer -->
            <%- include('./_footer.ejs') %>
            <!-- end footer -->
            <!-- ============================================================== -->
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- end main wrapper  -->
    <!-- ============================================================== -->
</body>
<script>
   
    chartIt();
    async function chartIt() {
        // await getData();
        const ctx = document.getElementById('categorychart').getContext('2d');
        const categorychart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: xlabels,
                datasets: [{
                    label: '# of Products',
                    data: ydata,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            }
        });
    }
    // var pathDAO = "../daos/mongodb";
    // var CategoryDAO = require(pathDAO + "/CategoryDAO.js");
    // var ProductDAO = require(pathDAO + "/ProductDAO.js");

    // async function getData() {
    //     var categories = await CategoryDAO.selectAll();
    //     const data = new Array();
    //     const labels = new Array();
    //     for (let i = 0; i < categories.length; i++) {
    //         var products = await ProductDAO.selectByCatID(categories[i]._id);
    //         // labels.push(categories[i].name);
    //         // data.push(products.length);
    //         xlabels.push(categories[i].name);
    //         console.log(xlabels);
    //         console.log('abc');
    //     }
    // }

</script>

</html>